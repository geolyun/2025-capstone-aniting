<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layout/adminLayout.html}">

<div layout:fragment="content">
  <main class="content">
    <div class="container-fluid">
      <h1 class="h3 mb-4">데이터 샘플 생성 도구</h1>

      <ul class="nav nav-tabs mb-3" id="sampleTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="recommend-tab" data-bs-toggle="tab" data-bs-target="#recommend" type="button" role="tab">샘플 추천 데이터 생성</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="pet-tab" data-bs-toggle="tab" data-bs-target="#pet" type="button" role="tab">반려동물 데이터 생성</button>
        </li>
        <li class="nav-item" role="presentation">
	      <button class="nav-link" id="special-pet-tab" data-bs-toggle="tab" data-bs-target="#special-pet" type="button" role="tab">특수동물 데이터 생성</button>
	    </li>
      </ul>

      <div class="tab-content" id="sampleTabContent">

        <!-- 추천 데이터 생성 탭 -->
        <div class="tab-pane fade show active" id="recommend" role="tabpanel">
          <div class="card">
            <div class="card-body">
              <p>아래 버튼을 클릭하면 GPT를 통해 샘플 추천 데이터를 생성합니다.</p>
              <div class="d-flex flex-column gap-2" style="max-width: 150px;">
                <button class="btn btn-outline-primary" onclick="generateSample(1)">1개 생성</button>
                <button class="btn btn-outline-success" onclick="generateSample(10)">10개 생성</button>
                <button class="btn btn-outline-warning" onclick="generateSample(50)">50개 생성</button>
                <button class="btn btn-outline-danger" onclick="generateSample(100)">100개 생성</button>
              </div>
              <div id="status" class="mt-3 fw-bold alert alert-info d-none"></div>
            </div>
          </div>
        </div>

        <!-- 반려동물 데이터 생성 탭 -->
        <div class="tab-pane fade" id="pet" role="tabpanel">
          <div class="card">
            <div class="card-body">
              <p>아래 버튼을 클릭하면 GPT를 통해 반려동물 데이터를 생성합니다. (실제 존재하고 한국에서 키울 수 있는 동물 위주)</p>
              <div class="d-flex flex-column gap-2" style="max-width: 150px;">
                <button class="btn btn-outline-primary" onclick="generatePet(1)">1개 생성</button>
                <button class="btn btn-outline-success" onclick="generatePet(10)">10개 생성</button>
                <button class="btn btn-outline-warning" onclick="generatePet(50)">50개 생성</button>
                <button class="btn btn-outline-danger" onclick="generatePet(100)">100개 생성</button>
              </div>
              <div id="petStatus" class="mt-3 fw-bold alert alert-info d-none"></div>
            </div>
          </div>
        </div>
        
        <!-- 특수동물 데이터 생성 탭 -->
	    <div class="tab-pane fade" id="special-pet" role="tabpanel">
	      <div class="card">
	        <div class="card-body">
	          <p>아래 버튼을 클릭하면 GPT를 통해 <strong>특수동물 데이터</strong>를 생성합니다. (곤충/장난감/가상동물 제외)</p>
	          <div class="d-flex flex-column gap-2" style="max-width: 150px;">
	            <button class="btn btn-outline-primary" onclick="generateSpecialPet(1)">1개 생성</button>
	            <button class="btn btn-outline-success" onclick="generateSpecialPet(10)">10개 생성</button>
	            <button class="btn btn-outline-warning" onclick="generateSpecialPet(50)">50개 생성</button>
	            <button class="btn btn-outline-danger" onclick="generateSpecialPet(100)">100개 생성</button>
	          </div>
	          <div id="specialPetStatus" class="mt-3 fw-bold alert alert-info d-none"></div>
	        </div>
	      </div>
	    </div>

      </div>
    </div>
  </main>
</div>

<div layout:fragment="script">
<script>
  function generateSample(count) {
    if (confirm(`${count}개의 샘플 추천 데이터를 생성하시겠습니까?`)) {
      $("#status").removeClass().addClass("mt-3 fw-bold alert alert-info").text("생성 중입니다...").removeClass("d-none");
      $("button").prop("disabled", true);
      $.post("/api/admin/sample/generate?count=" + count, function (res) {
        $("#status").removeClass().addClass("mt-3 fw-bold alert alert-success").text(res).removeClass("d-none");
        alert(res);
      }).fail(function () {
        $("#status").removeClass().addClass("mt-3 fw-bold alert alert-danger").text("오류 발생").removeClass("d-none");
        alert("오류 발생");
      }).always(function () {
        $("button").prop("disabled", false);
      });
    }
  }

  function generatePet(count) {
    if (confirm(`${count}개의 반려동물 데이터를 생성하시겠습니까?`)) {
      $("#petStatus").removeClass().addClass("mt-3 fw-bold alert alert-info").text("생성 중입니다...").removeClass("d-none");
      $("button").prop("disabled", true);
      $.post("/api/admin/sample/generatePet?count=" + count, function (res) {
        $("#petStatus").removeClass().addClass("mt-3 fw-bold alert alert-success").text(res).removeClass("d-none");
        alert(res);
      }).fail(function () {
        $("#petStatus").removeClass().addClass("mt-3 fw-bold alert alert-danger").text("오류 발생").removeClass("d-none");
        alert("오류 발생");
      }).always(function () {
        $("button").prop("disabled", false);
      });
    }
  }
  
  function generateSpecialPet(count) {
    if (confirm(`${count}개의 특수동물 데이터를 생성하시겠습니까?`)) {
      $("#specialPetStatus").removeClass().addClass("mt-3 fw-bold alert alert-info").text("생성 중입니다...").removeClass("d-none");
      $("button").prop("disabled", true);
      $.post("/api/admin/sample/generateSpecialPet?count=" + count, function (res) {
        $("#specialPetStatus").removeClass().addClass("mt-3 fw-bold alert alert-success").text(res).removeClass("d-none");
        alert(res);
      }).fail(function () {
        $("#specialPetStatus").removeClass().addClass("mt-3 fw-bold alert alert-danger").text("오류 발생").removeClass("d-none");
        alert("오류 발생");
      }).always(function () {
        $("button").prop("disabled", false);
      });
    }
  }
</script>
</div>

</html>
