<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>애니팅 | 반려동물 추천 AI</title>
  
  <link rel="icon" type="image/png" href="/drool_assets/images/favicon.png">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Poppins:400,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/drool_assets/css/style.css" />
  <link rel="stylesheet" href="/drool_assets/css/responsive.css" />

  <style>
    .login-wrapper {
      background: white;
      border-radius: 30px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      padding: 3rem;
    }
    .welcome-box {
	  background: linear-gradient(135deg, #fff1c1, #fdd49a);
	  border-radius: 25px;
	  min-width: 200px;
	  max-width: 350px;
	  flex: 1 1 0;
	}
    .login-box input {
      background: #fff8dc;
    }
    .login-box button {
      background: linear-gradient(135deg, #ffd95c, #ff8c00);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    @media (max-width: 768px) {
      .login-wrapper {
        padding: 2rem;
        flex-direction: column !important;
      }
      .welcome-box {
        margin-bottom: 2rem;
        border-radius: 20px;
      }
    }
  </style>
</head>

<body>
  <div class="hero_area">
    <!-- Header -->
    <header class="header_section">
      <div class="container-fluid">
        <nav class="navbar navbar-expand-lg custom_nav-container">
          <a class="navbar-brand" href="/recommend/chat">
            <img src="/drool_assets/images/logo.png" alt="logo">
          </a>
        </nav>
      </div>
    </header>

    <!-- Main section -->
    <section class="slider_section">
      <div class="container-fluid">
        <div class="row align-items-center">
          <div class="col-md-6 offset-md-1">
            <div class="login-wrapper d-flex flex-md-row flex-column align-items-start justify-content-between flex-wrap gap-3">

              <!-- 안내 문구 -->
              <div class="welcome-box p-5 me-md-4 mb-4 mb-md-0">
                <h4 class="fw-bold mb-4">회원 정보를 수정하세요</h4>
                <h5 class="fw-semibold mb-3">더 나은 추천을 위해 정확한 정보를 유지해요</h5>
                <p class="text-dark mb-0" style="line-height: 1.8;">
                  이름, 비밀번호와 같은 정보를<br>
                  변경할 수 있어요.<br><br>
                  변경된 정보는 즉시 적용됩니다.
                </p>
              </div>

              <!-- 수정 폼 -->
              <div class="login-box" style="max-width: 340px; width: 100%;">
                <h6 class="text-end fw-bold mb-3" style="color: #ff8c00;">EDIT PROFILE</h6>
                <form>
                  <div class="mb-2">
                    <label class="form-label small">이름</label>
                    <input type="text" class="form-control rounded-pill px-3 py-1 shadow-sm" placeholder="변경할 이름 입력 (선택)">
                  </div>
                  <div class="mb-2">
                    <label class="form-label small">새 비밀번호</label>
                    <input type="password" class="form-control rounded-pill px-3 py-1 shadow-sm" placeholder="새 비밀번호 입력 (선택)">
                  </div>
                  <div class="mb-3">
                    <label class="form-label small">비밀번호 확인</label>
                    <input type="password" class="form-control rounded-pill px-3 py-1 shadow-sm" placeholder="새 비밀번호 다시 입력">
                  </div>
                  <button type="submit" class="btn w-100 py-2 rounded-pill text-white fw-semibold" style="font-size: 0.9rem;">회원정보 수정</button>
                </form>
              </div>

            </div>
          </div>

          <!-- 오른쪽 일러스트 -->
          <div class="col-md-4">
            <div class="img-box text-center">
              <img src="/drool_assets/images/slider-img.png" alt="반려동물 일러스트" class="img-fluid">
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script src="/drool_assets/js/jquery-3.4.1.min.js"></script>
  <script src="/drool_assets/js/bootstrap.js"></script>
  <script>
	  $("form").submit(function (e) {

	    e.preventDefault();
	
	    const usersNm = $("input[placeholder='변경할 이름 입력 (선택)']").val();
	    const passwd = $("input[placeholder='새 비밀번호 입력 (선택)']").val();
	    const confirmPasswd = $("input[placeholder='새 비밀번호 다시 입력']").val();
	
	    if (passwd !== confirmPasswd) {
	      alert("비밀번호가 일치하지 않습니다.");
	      return;
	    }
	
	    $.ajax({

	      url: "/api/mypage/update",
	      type: "POST",
	      contentType: "application/json",
	      data: JSON.stringify({ usersNm, passwd }),
	      success: function () {
	        alert("회원정보가 수정되었습니다.");
	        location.href = "/user/mypage"; // 수정 후 마이페이지로 이동
	      },
	      error: function () {
	        alert("수정 중 오류가 발생했습니다.");
	      }
	      
	    });
	    
	  });
	</script>
</body>
</html>
