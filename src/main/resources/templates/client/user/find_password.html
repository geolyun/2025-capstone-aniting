<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>애니팅 | 반려동물 추천 AI</title>

  <link rel="icon" type="image/png" href="drool_assets/images/favicon.png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Poppins:400,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="drool_assets/css/style.css" />
  <link rel="stylesheet" href="drool_assets/css/responsive.css" />
  <style>
    .login-wrapper {
      background: white;
      border-radius: 30px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      padding: 3rem;
    }
    .welcome-box {
      background: linear-gradient(135deg, #fff1c1, #fdd49a);
      border-radius: 25px;
      min-width: 200px;
      max-width: 350px;
      flex: 1 1 0;
    }
    .login-box input,
    .login-box select {
      background: #fff8dc;
      border: none;
    }
    .login-box button {
      background: linear-gradient(135deg, #ffd95c, #ff8c00);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    @media (max-width: 768px) {
      .login-wrapper {
        padding: 2rem;
        flex-direction: column !important;
      }
      .welcome-box {
        margin-bottom: 2rem;
        border-radius: 20px;
      }
    }
  </style>
</head>

<body>
  <div class="hero_area">
    <header class="header_section">
      <div class="container-fluid">
        <nav class="navbar navbar-expand-lg custom_nav-container">
          <a class="navbar-brand" href="/">
            <img src="drool_assets/images/logo.png" alt="logo">
          </a>
        </nav>
      </div>
    </header>

    <section class="slider_section">
      <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          <div class="container-fluid">
            <div class="row align-items-center">
              <div class="col-md-6 offset-md-1">
                <div class="login-wrapper d-flex flex-md-row flex-column align-items-start justify-content-between flex-wrap gap-4" style="width: 100%;">
                  
                  <!-- 왼쪽 안내 -->
                  <div class="welcome-box p-5 me-md-4 mb-4 mb-md-0">
                    <h4 class="fw-bold mb-4">비밀번호를 잊으셨나요?</h4>
                    <h5 class="fw-semibold mb-3">아이디와 보안 답변을 입력해주세요</h5>
                    <p class="text-dark mb-0" style="line-height: 1.8;">
                      가입 시 설정한 보안 질문의 답변을 입력하면<br>
                      비밀번호를 재설정할 수 있어요.<br><br>
                      등록된 정보가 일치해야 변경이 가능합니다.
                    </p>
                  </div>

                  <!-- 비밀번호 찾기 폼 -->
                  <div class="login-box" style="min-width: 320px;">
                    <h5 class="text-end fw-bold mb-4" style="color: #ff8c00;">FIND PASSWORD</h5>
                    <form>
                      <div class="mb-3">
                        <label class="form-label">아이디</label>
                        <input type="text" class="form-control rounded-pill px-4 py-2 border-0 shadow-sm" placeholder="아이디 입력" required>
                      </div>
                      <div class="mb-3">
                        <label class="form-label">보안 질문</label>
                        <select class="form-select rounded-pill px-3 py-1 shadow-sm" required>
                          <option selected disabled>질문을 선택하세요</option>
                          <option>기억에 남는 초등학교 이름은?</option>
                          <option>처음 키운 반려동물 이름은?</option>
                          <option>좋아하는 동물은?</option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label class="form-label">답변</label>
                        <input type="text" class="form-control rounded-pill px-4 py-2 border-0 shadow-sm" placeholder="질문에 대한 답변 입력" required>
                      </div>
                      <button type="submit" class="btn w-100 py-2 rounded-pill text-white fw-semibold">비밀번호 재설정</button>
                      <p class="text-center mt-4 text-muted small">
                        기억이 나셨나요?
                        <a href="/" class="fw-semibold text-decoration-none" style="color: #ff8c00;">로그인</a>
                      </p>
                    </form>
                  </div>

                </div>
              </div>

              <!-- 오른쪽 일러스트 -->
              <div class="col-md-4">
                <div class="img-box text-center">
                  <img src="drool_assets/images/slider-img.png" alt="반려동물 일러스트" class="img-fluid">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>  
    </section>
  </div>

  <script src="drool_assets/js/jquery-3.4.1.min.js"></script>
  <script src="drool_assets/js/bootstrap.js"></script>
  <script>
	  $(function () {

	    $("form").submit(function (e) {

	      e.preventDefault();
	
	      const usersId = $("input[placeholder='아이디 입력']").val();
	      const securityQuestion = $("select").val();
	      const securityAnswer = $("input[placeholder='질문에 대한 답변 입력']").val();
	
	      $.ajax({

	        url: "/api/users/verify_security",
	        method: "POST",
	        contentType: "application/json",
	        data: JSON.stringify({ usersId, securityQuestion, securityAnswer }),
	        success: function () {
	          localStorage.setItem("recoveringUserId", usersId);
	          window.location.href = "/reset_password";
	        },
	        error: function () {
	          alert("입력하신 정보가 일치하지 않습니다.");
	        }
	        
	      });
	      
	    });
	    
	  });
	</script>
  
</body>
</html>
